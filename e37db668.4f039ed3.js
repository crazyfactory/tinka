(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{87:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(2),a=n(6),o=(n(0),n(93)),i={slug:"hello-world-welcome-tinka",title:"Hello world, welcome Tinka",author:"Nishchal Gautam",author_title:"Managing Complexity in code (Software Engineering)",author_url:"https://github.com/cyberhck",author_image_url:"https://avatars1.githubusercontent.com/u/3640284?v=4",tags:["API","SDK","Swagger","Tinka","REST","Swagger"]},s={permalink:"/tinka/blog/hello-world-welcome-tinka",editUrl:"https://github.com/crazyfactory/tinka/edit/master/docs/blog/blog/2020-10-14-adding-tinka.md",source:"@site/blog/2020-10-14-adding-tinka.md",description:"Hello world, I'm introducing tinka to the mix.",date:"2020-10-14T00:00:00.000Z",tags:[{label:"API",permalink:"/tinka/blog/tags/api"},{label:"SDK",permalink:"/tinka/blog/tags/sdk"},{label:"Swagger",permalink:"/tinka/blog/tags/swagger"},{label:"Tinka",permalink:"/tinka/blog/tags/tinka"},{label:"REST",permalink:"/tinka/blog/tags/rest"},{label:"Swagger",permalink:"/tinka/blog/tags/swagger"}],title:"Hello world, welcome Tinka",readingTime:2.145,truncated:!1},l=[],c={rightToc:l};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Hello world, I'm introducing tinka to the mix."),Object(o.b)("p",null,"Few years ago ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/wmathes"}),"@wmathes")," asked me to find a http client which was similar to aurelia http client (this was before angularjs)"),Object(o.b)("p",null,"I did a lot of research and found axios, and a few others whose name weren't even heard of."),Object(o.b)("p",null,"At that point, axios didn't include any type definitions, it didn't have middleware functionality, basically the set of requirements I was given simply wasn't done by axios (I don't think it still does)."),Object(o.b)("p",null,"After not finding anything worth it's salt, we decided to roll our own: ",Object(o.b)("inlineCode",{parentName:"p"},"tinka"),", it's fetch http client, which has no dependency (really, check out ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/crazyfactory/tinka/blob/master/package.json"}),"package.json"),") and would be as close to fetch as we could possibly make."),Object(o.b)("p",null,"The best decision for ",Object(o.b)("inlineCode",{parentName:"p"},"tinka")," was to make middleware it's first class citizen, literally everything's a middleware (the part of code which makes the actual fetch call, is also a middleware)"),Object(o.b)("p",null,"I've been using tinka for a long time now, and I must say it's been great so far. Because the way middleware works, it's made my development so easy."),Object(o.b)("p",null,"Adding response time, doing refresh tokens on expired jwt, automatically adding jwt to all requests etc are all done through this middleware."),Object(o.b)("p",null,"Last time I checked, axios now has middleware support I think it's called interceptors. And here's what it looks like"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-typescript"}),"axios.interceptors.request.use(function (config) {\n    // Do something before request is sent\n    console.log(config);\n    return config;\n  }, function (error) {\n    // Do something with request error\n    return Promise.reject(error);\n  });\naxios.interceptors.response.use(function (response) {\n    // Do something with response data\n    return response;\n  }, function (error) {\n    // Do something with response error\n    return Promise.reject(error);\n  });\n")),Object(o.b)("p",null,"My first problem would be, how do I log time taken for a particular request to my server for analytics purpose, monitoring SLAs etc, (remember, you can't only measure response time on server side, you must also do it on client side)"),Object(o.b)("p",null,"Here's how you do it with tinka:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-typescript"}),'import {IMiddleware} from "../Stack";\nimport {IFetchRequest, IFetchResponse} from "./FetchMiddleware";\n\nexport class LogResponseTime implements IMiddleware<IFetchRequest, Promise<IFetchResponse<any>>> {\n    public async process(options: IFetchRequest, next: (nextOptions: IFetchRequest) => Promise<IFetchResponse<any>>): Promise<IFetchResponse<any>> {\n        const start = performance.now();\n        const response = await next(options);\n        const timeTaken = performance.now() - start;\n        // push time taken to localStorage and serviceWorker will send it to our servers\n        return response;\n    }\n}\n')),Object(o.b)("p",null,"Tinka shines when Sdk is provided for a while API with all types, the perfect setup would be to have a npm package which you install when you want to consume a particular API."),Object(o.b)("p",null,"You can also look at a usage example here: ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/fossapps/Feature.Manager.Ui/tree/master/src/Sdk"}),"https://github.com/fossapps/Feature.Manager.Ui/tree/master/src/Sdk")))}p.isMDXComponent=!0},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,b=u["".concat(i,".").concat(m)]||u[m]||d[m]||o;return n?a.a.createElement(b,s(s({ref:t},c),{},{components:n})):a.a.createElement(b,s({ref:t},c))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);